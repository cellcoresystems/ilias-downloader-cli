group 'com.github.thetric.iliasdownloader'
version '0.0.1-SNAPSHOT'

repositories {
    jcenter()
}

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.0-M3'
    }
}

subprojects {
    apply plugin: 'groovy'
    apply plugin: 'org.junit.platform.gradle.plugin'

    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    version '0.0.1-SNAPSHOT'

    dependencies {
        compile 'org.codehaus.groovy:groovy-all:2.4.8'

        // logging libs
        compile 'org.apache.logging.log4j:log4j-core:2.7'

        // test
        testCompile 'org.junit.jupiter:junit-jupiter-api:5.0.0-M3'
        testRuntime 'org.junit.jupiter:junit-jupiter-engine:5.0.0-M3'
    }

    // Code coverage

    apply plugin: 'jacoco'

    jacoco {
        toolVersion = '0.7.8'
    }

    jacocoTestReport {
        reports {
            xml.enabled false
            csv.enabled false
            html.enabled true
        }
    }

    check.dependsOn jacocoTestReport

    repositories {
        jcenter()
        maven { url "https://jitpack.io" }
        maven { url 'https://oss.sonatype.org/content/repositories/ksoap2-android-releases' }
    }

    tasks.withType(GroovyCompile) {
        groovyOptions.optimizationOptions.indy = true
    }
}
